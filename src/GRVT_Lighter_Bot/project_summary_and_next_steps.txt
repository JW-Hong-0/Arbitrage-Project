# 프로젝트 진행 상황 및 향후 계획

## 개요
- **프로젝트:** GRVT-Lighter 차익거래 봇
- **현재 목표:** 봇의 안정성을 확보하고, 거래소 데이터를 상세히 모니터링하는 기능 구현
- **날짜:** 2026-01-07

---

## 1. 현재까지의 진행 상황 (완료된 작업)

긴 디버깅 과정을 통해 아래와 같은 핵심 문제들을 해결하고 봇의 기본 토대를 완성했습니다.

- **Lighter 거래소 연결 문제 해결:**
  - SDK 버전 불일치, 예약된 API 키 인덱스 사용 등 복잡한 문제를 해결했습니다.
  - 최종적으로 SDK의 버그를 우회하기 위해, `aiohttp` 라이브러리를 사용하여 API를 직접 호출하는 방식으로 안정적인 연결을 확보했습니다.

- **GRVT 거래소 연결 문제 해결:**
  - `trading_account_id` 파라미터가 잘못 전달되던 문제를 수정하여 연결을 정상화했습니다.

- **잔고 표시 문제 해결:**
  - 양쪽 거래소의 잔고가 간헐적으로 0으로 표시되던 회귀 버그를, 안정적인 API 호출 방식으로 변경하여 최종적으로 해결했습니다.

- **봇 기능 변경 (모니터 기능 구현):**
  - 사용자님의 요청에 따라, 거래 로직을 비활성화하고 양쪽 거래소의 시장 데이터를 상세히 비교/출력하는 '모니터' 모드로 봇의 핵심 로직을 성공적으로 리팩토링했습니다.

- **봇 멈춤(Hanging) 현상 해결:**
  - GRVT의 WebSocket과 Lighter의 API 호출 간의 충돌로 추정되던 봇 멈춤 현상을, GRVT의 거래 체결 감지 방식을 WebSocket에서 REST API 주기적 호출(Polling) 방식으로 변경하여 해결했습니다.

- **최신 오류 수정 (`TypeError`):**
  - 모니터링 데이터 출력 시, API 응답에 특정 값이 없는 경우 `None`이 전달되어 `TypeError`가 발생하는 문제를 해결했습니다. 데이터가 없는 경우, 안전하게 문자열 'N/A'로 처리하도록 수정했습니다.

---

## 2. 앞으로 남은 단계 (봇의 '손과 발' 완성하기)

현재 봇의 "눈"(모니터링) 기능이 거의 완성되었습니다. 다음 단계는 "손과 발"(주문 기능)을 각각 테스트하고, 최종적으로 이들을 모두 연결하는 것입니다.

- **1단계: 모니터링 기능 최종 확인**
  - 방금 수정한 코드를 바탕으로 `main.py`를 다시 실행하여, 모든 데이터가 오류 없이 대시보드에 정상적으로 출력되는지 마지막으로 확인합니다.

- **2단계: 주문 기능 테스트 스크립트 생성**
  - 봇의 메인 로직과 분리하여, 오직 주문 기능만을 테스트하기 위한 별도의 `test_orders.py` 파일을 생성합니다.

- **3단계: GRVT 지정가 주문 테스트 (손 기능)**
  - `test_orders.py`에 소량의 지정가 매수/매도 주문을 GRVT 테스트넷에 실행하고, 잠시 후 해당 주문을 취소하는 기능을 구현하고 테스트합니다.

- **4단계: Lighter 시장가 주문 테스트 (발 기능)**
  - `test_orders.py`에 소량의 시장가 매수/매도 주문을 Lighter 테스트넷에 실행하는 기능을 구현하고 테스트합니다.

- **5단계: 전체 헤징 로직 종합 테스트**
  - 위 개별 주문 테스트가 모두 성공하면, `strategy.py`의 거래 로직을 다시 활성화합니다.
  - GRVT에서 주문이 체결되면(`on_fill`), Lighter에서 자동으로 헤징 주문이 나가는 전체 거래 사이클이 정상적으로 작동하는지 최종 테스트합니다.

이 모든 단계가 완료되면, 우리의 봇은 시장을 감시하고, 주문을 실행하며, 위험을 헤징하는 모든 핵심 기능을 갖추게 됩니다.

python -m src.GRVT_Lighter_Bot.main